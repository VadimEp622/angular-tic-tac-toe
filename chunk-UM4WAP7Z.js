import{i as O,j as G}from"./chunk-GNZG4MGV.js";import{$ as P,Aa as o,Ba as a,Da as _,Ea as h,Fa as m,Ha as C,Ia as l,J as k,Ja as y,Ka as I,La as g,Na as S,O as f,Q as p,R as d,U as v,ma as c,na as w,xa as x,za as u}from"./chunk-52CRMJ2S.js";var M=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=f({type:t,selectors:[["tile"]],inputs:{tileItem:"tileItem"},standalone:!0,features:[g],decls:2,vars:1,consts:[[1,"fs34"]],template:function(i,r){i&1&&(o(0,"span",0),l(1),a()),i&2&&(c(),y(r.tileItem?r.tileItem:""))},styles:["[_nghost-%COMP%]{display:flex;width:100px;height:100px;background-color:#d3d3d3;align-items:center;justify-content:center;border:1px solid gray}"]});let n=t;return n})();function j(n,t){if(n&1){let s=_();o(0,"tile",2),h("click",function(){let r=p(s).index,T=m();return d(T.onTileClick(r))}),a()}if(n&2){let s=t.$implicit;u("tileItem",s)}}var E=(()=>{let t=class t{constructor(){this.handleTileClick=new k}ngOnInit(){}onTileClick(e){this.handleTileClick.emit(e)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=f({type:t,selectors:[["board"]],inputs:{isGameOn:"isGameOn",tileList:"tileList",isPlayerNext:"isPlayerNext"},outputs:{handleTileClick:"handleTileClick"},standalone:!0,features:[g],decls:2,vars:1,consts:[[1,"board-container"],[3,"tileItem","click",4,"ngFor","ngForOf"],[3,"tileItem","click"]],template:function(i,r){i&1&&(o(0,"section",0),x(1,j,1,1,"tile",1),a()),i&2&&(c(),u("ngForOf",r.tileList))},dependencies:[M,O],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;padding-block:20px}.board-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,100px)}"]});let n=t;return n})();var N=(()=>{let t=class t{constructor(){}getRandomIntInclusive(e,i){return e=Math.ceil(e),i=Math.floor(i),Math.floor(Math.random()*(i-e+1))+e}getRandBool(){return Math.round(Math.random())===0}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var W=(()=>{let t=class t{constructor(e){this.utilService=e}newGame(){this.clearAllIntervals(),this.game=this._createGame(),this.player=null,this.game.isGameOn=!0}restart(){this.clearAllIntervals(),this.game=this._createGame(),this.game.isGameOn=!0,this.player&&!this.game.isPlayerNext&&this.machineTurn()}machineTurn(){this.game.timeOut=setTimeout(()=>{let e=this._getPossibleMoves(),i=this.utilService.getRandomIntInclusive(0,e.length-1);this.doMove(e[i])},500)}clearAllIntervals(){this.game?.timeOut&&clearTimeout(this.game.timeOut)}doMove(e){if(!this.game.isGameOn||this.game.isWin||!this._getPossibleMoves().includes(e))return;this.game.board[e]=this.getWhoIsNext();let r=this._checkWin();r&&this._endGame(r),this.game.isPlayerNext=!this.game.isPlayerNext,this.game.isPlayerNext||this.machineTurn()}setPlayer(e){this.player=e}getGame(){return this.game}getPlayer(){return this.player}getWhoIsNext(){return this.game.isPlayerNext?this.player==="X"?"X":"O":this.player==="X"?"O":"X"}_endGame(e){this.clearAllIntervals(),this.game.isWin=!0,this.game.isGameOn=!1,this.game.winner=e}_createGame(){return{isGameOn:!1,board:Array(9).fill(null),isPlayerNext:this.utilService.getRandBool(),isWin:!1,winner:null,timeOut:null}}_getPossibleMoves(){return this.game.board.reduce((e,i,r)=>(i===null&&e.push(r),e),[])}_getPossibleWins(){return[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]}_checkWin(){let e=this._getPossibleWins();for(let i=0;i<e.length;i++){let[r,T,V]=e[i];if(this.game.board[r]&&this.game.board[r]===this.game.board[T]&&this.game.board[r]===this.game.board[V])return this.game.board[r]}return this._checkIsBoardFull()?"tie":null}_checkIsBoardFull(){return!this.game.board.includes(null)}};t.\u0275fac=function(i){return new(i||t)(P(N))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function D(n,t){if(n&1){let s=_();o(0,"section",4)(1,"h3"),l(2,"Please pick a side:"),a(),o(3,"section",5)(4,"button",6),h("click",function(){p(s);let i=m();return d(i.onPlayerPick("X"))}),o(5,"p",7),l(6,"X"),a()(),o(7,"button",6),h("click",function(){p(s);let i=m();return d(i.onPlayerPick("O"))}),o(8,"p",7),l(9,"O"),a()()()()}}function R(n,t){if(n&1&&(o(0,"h3"),l(1),a()),n&2){let s=m(2);c(),I("Next is: ",s.ticTacToeService.getWhoIsNext()," ")}}function X(n,t){if(n&1&&(o(0,"h3"),l(1),a()),n&2){let s=m(2);c(),y(s.ticTacToeService.getGame().winner==="tie"?"Tie!":s.ticTacToeService.getGame().winner+" Wins!")}}function L(n,t){if(n&1){let s=_();o(0,"section",8)(1,"button",6),h("click",function(){p(s);let i=m();return d(i.ticTacToeService.restart())}),l(2,"New game"),a()(),o(3,"section",9)(4,"h3"),l(5),a(),x(6,R,2,1,"h3",10)(7,X,2,1,"ng-template",null,11,S),a(),o(9,"board",12),h("handleTileClick",function(i){p(s);let r=m();return d(r.handleTileClick(i))}),a()}if(n&2){let s=C(8),e=m();c(5),I("You are: ",e.ticTacToeService.getPlayer(),""),c(),u("ngIf",!e.ticTacToeService.getGame().isWin)("ngIfElse",s),c(3),u("isGameOn",e.ticTacToeService.getGame().isGameOn)("tileList",e.ticTacToeService.getGame().board)("isPlayerNext",e.ticTacToeService.getGame().isPlayerNext)}}var F=(()=>{let t=class t{constructor(e){this.ticTacToeService=e}ngOnInit(){this.ticTacToeService.newGame()}ngOnDestroy(){this.ticTacToeService.clearAllIntervals()}handleTileClick(e){this.ticTacToeService.getGame().isPlayerNext&&this.ticTacToeService.doMove(e)}onPlayerPick(e){this.ticTacToeService.setPlayer(e),this.ticTacToeService.getGame().isPlayerNext||this.ticTacToeService.machineTurn()}};t.\u0275fac=function(i){return new(i||t)(w(W))},t.\u0275cmp=f({type:t,selectors:[["tic-tac-toe"]],hostAttrs:[1,"full","main-layout"],standalone:!0,features:[g],decls:6,vars:2,consts:[[1,"tic-tac-toe","pd-bl-20"],[1,"text-align-center","pd-bl-ed-10"],["class","flex gap20 pd-bl-10 justify-center",4,"ngIf","ngIfElse"],["board",""],[1,"flex","gap20","pd-bl-10","justify-center"],[1,"flex","gap10"],[3,"click"],[1,"width-10"],[1,"width-300","pd-bl-10","mg-in-auto"],[1,"pd-bl-10","flex","space-between","gap40","width-300","mg-in-auto"],[4,"ngIf","ngIfElse"],["whoWins",""],[3,"isGameOn","tileList","isPlayerNext","handleTileClick"]],template:function(i,r){if(i&1&&(o(0,"section",0)(1,"h2",1),l(2,"Welcome to Tic-Tac-Toe"),a(),x(3,D,10,0,"section",2)(4,L,10,6,"ng-template",null,3,S),a()),i&2){let T=C(5);c(3),u("ngIf",!r.ticTacToeService.getPlayer())("ngIfElse",T)}},dependencies:[E,G]});let n=t;return n})();var ie=[{path:"tic-tac-toe",component:F}];export{ie as routes};
